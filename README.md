# Smash Ultimate Material Research
A collection of dumps, scripts, and markdown files for research into lighting, shading, rendering, and materials for Smash Ultimate.
The markdown files contain information on researched values for materials and can be viewed directly
in the browser. Please submit an issue or pull request for any incorrect or missing information.

# [Website](https://scanmountgoat.github.io/Smush-Material-Research/)
The repository has a website for tutorials and real time demos. If any pages don't load properly or one of the demos is messed up, report the bug in [issues](https://github.com/ScanMountGoat/Smush-Material-Research/issues). 

# Generating Data - WIP
Basic instructions for how to generate the value dumps. 

## SQLite Material Database
Most of the data is stored in an SQLite database generated by the program in the [Smush-Material-DB](https://github.com/ScanMountGoat/Smush-Material-DB) repo.  
The repo contains instructions for how to run the tool. The database can be used with the provided python scripts for data visualization even without any SQL knowledge.

## XML Dumps
1. Download or build the `xmb` executable from [xmb_lib](https://github.com/ultimate-research/xmb_lib)
2. `python batch_export_xmb_to_xml.py <xmb executable> <ARC root folder> <dump output folder>`

## Json Dumps
TODO:


## Shader Info Dump
Extract the `nuc2effectlibrary.nufxlb.json` from `Value Dumps` or convert the `nuc2effectlibrary.nufxlb` file to JSON using [ssbh_lib_json](https://github.com/ultimate-research/ssbh_lib/releases).  
`python batch_export_shader_info.py nuc2effectlibrary.nufxlb.json <export folder>`  

## Shader Database
The JSON dump of the Nufx file can be converted to an SQLite database for more efficient querying.  
`python create_shader_db.py nuc2effectlibrary.json nufx.db`  
The file contains duplicate entries for each render pass (_opaque, _sort, etc). These entries can be removed by adding the `--remove_duplicates` flag.  
`python create_shader_db.py nuc2effectlibrary.json nufx.db --remove_duplicates`   

## Dump Shader Binaries
1. Build the BatchExportShaderBinaries in [SSBHLib](https://github.com/Ploaj/SSBHLib/blob/master/BatchExportShaderBinaries)
2. `BatchExportShaderBinaries.exe "render/shader/bin" <Binary Output Folder>`

# Additional Tools
[ssbh_lib](https://github.com/ultimate-research/ssbh_lib) - Contains the `ssbh_lib_json` executable for editing various rendering related file types as JSON  
[xmb_lib](https://github.com/ultimate-research/xmb_lib) - Contains the `xmb` executable that can be used to convert XMB files to and from XML


